# Building a Fractal in python

\documentclass{article}
\usepackage[T2A]{fontenc}
\usepackage{graphicx} 
\graphicspath{{images/}}
\usepackage{subcaption}
\usepackage[utf8]{inputenc}
\usepackage{caption}
\usepackage{wrapfig}
\usepackage{minted}
\usepackage{setspace}
\setstretch{1.5}
\usepackage{geometry}
\geometry{a4paper, portrait, margin=30mm, bmargin=30mm, tmargin=30mm}
\usepackage[russian]{babel}

\begin{document}
\begin{center}
\thispagestyle{empty}
\LARGE{Московский Государственный Университет имени М. В. Ломоносова}\\[-0.9ex]
\large{Физический факультет}\\
\vspace{0.3cm}
\begin{center}
\includegraphics[width=7cm]{images/PP.jpg}\\
\vspace{0.9cm}
\textbf{\LARGE{Построение Фрактала в python}}
\medskip\par
\textbf{\normalsize{Семестровый отчет по програмированию}} \\[2ex]
\vspace{1.2cm}
\large{Работа выполнена студентами 211 группы:}\\[-1.5ex]
\bigskip\par
\textit{\large{Константином Петуховым, Никитой Лариным, Константином Антроповым, Булатом Ибрагимовым}}\\[-1ex]
\vspace{0.6cm}
\end{center}
\medskip
\end{center}
\vskip150pt
\begin{tabular}{ll}
  Дата:  & \today \\[-1ex]
  Преподаватель: & Шишаков Виталий Владимирович \\
\end{tabular}
\newpage
 
\tableofcontents
 
\section{Фракталы}
Фрактал --- это математическая структура, которая характеризуется самоподобием. Так называются схожие элементы, повторяющиеся на разных масштабах. Главной особенностью фракталов является их самоподобие: если увеличить любую часть фрактала, она будет выглядеть так же, как и весь фрактал в целом.

\vskip10pt

Фракталы можно разделить на несколько основных типов в зависимости от их математических свойств и метода построения:
\begin{itemize}
  \item \textbf{Геометрические:} \newline \textit{Основаны на геометрических правилах, которые применяются к простым формам для создания более сложных структур. Пример —-- снежинка Коха(Рис. 1a), в рамках которой на сторонах правильного треугольника появляется замкнутая кривая бесконечной длины.}
  
  \item \textbf{Алгебраические:}\\ \textit{Создаются с помощью математических формул, которые применяются к координатам точек. Они строятся на основе повторения функции комплексных чисел(Рис. 1b).}

  \item \textbf{Стохастические:}\\ \textit{Включают в себя случайные элементы. Они имитируют объекты, которые невозможно описать строгими математическими правилами, например, форму береговой линии(Рис. 1с) или поверхность гор.}
  
\end{itemize}

\begin{figure}[htbp]
    \centering
    \begin{subfigure}{0.3\textwidth}
        \centering
        \includegraphics[width=.7\linewidth]{images/Koh.jpg}
        \caption{Звезда Хельге фон Коха}
        \label{fig:image1}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.3\textwidth}
        \centering
        \includegraphics[width=.7\linewidth]{images/Mandelbrot.jpg}
        \caption{Множество Мандельброта}
        \label{fig:image2}
    \end{subfigure}
    \hfill
    \begin{subfigure}{0.3\textwidth}
        \centering
        \includegraphics[width=.7\linewidth]{images/Coast.jpg}
        \caption{Береговая линия Норвегии}
        \label{fig:image3}
    \end{subfigure}
    \caption{Основные типы фракталов: a - геометрический, b - алгебраичееский, c - стохастический}
    \label{fig:three_images}
\end{figure}

\vskip10pt

\begin{wrapfigure}{r}{0.25\textwidth}
    \centering
    \includegraphics[width=0.25\textwidth]{images/papa.jpg}
\end{wrapfigure}

Фракталы можно найти в самых разнообразных природных формах. Например, такие свойства есть у листьев папоротника, деревьев и облаков. Они обладают способностью к самоподобию, что позволяет им развиваться по схожим правилам независимо от масштаба.Фракталы применяются в математике, компьютерной графике, различных природных и социальных явлениях. Они позволяют моделировать сложные структуры, которые иначе было бы трудно описать:

\begin{itemize}
    \item С помощью сложных стохастических законов учёные могут воспроизводить структуры объектов живой природы. Например, добавляя отклонения на различных итерациях к таким фракталам, как дерево Пифагора или снежинка Коха, можно получить изображение наклонившейся листвы или сгенерировать сколько угодно неповторимых снежинок.

    \item Фракталы используются для создания компьютерной графики, визуализации данных и даже в развитии искусственного интеллекта. Их свойства помогают находить оптимальные алгоритмы для обработки изображений и создают визуально привлекательные композиции.

    \item В медицине фракталы применяют для исследования внутренних процессов в организме человека, изучения сердечного ритма, работы кровеносных сосудов и нервной системы.

    \item В экономике на основе фракталов проводят анализ рынков и выявляют закономерности в поведении цен.
\end{itemize}

\vskip40pt

\section{Треугольник Серпинского}
\begin{wrapfigure}{r}{0.3\textwidth}
    \centering
    \includegraphics[width=0.3\textwidth]{images/tr.jpg}
\end{wrapfigure}

Треугольник Серпинского — это фрактал, один из двумерных аналогов множества Кантора. Математическое описание которого опубликовал польский математик Вацлав Серпинский в 1915 году.

\vskip10pt

Треугольник Серпинского получается из треугольника путём рекурсивного деления его на меньшие треугольники. На каждом шаге каждый треугольник заменяется на ещё три равносторонних треугольника меньшего размера. Этот процесс повторяется до бесконечности для каждого из меньших треугольников, которые остались.

\vskip10pt

Некоторые свойства треугольника Серпинского:\\
1) Самоподобие. Каждая его более мелкая часть аналогична всему треугольнику в целом.\\
2) Фрактальность. Треугольник Серпинского обладает сложной и повторяющейся структурой на всех уровнях масштаба.\\
3) Бесконечность. Процесс рекурсивного деления треугольника повторяется до бесконечности, что приводит к бесконечному числу мелких треугольников в структуре.\\
4) Плотность. Треугольник заполняет всё пространство внутри исходного треугольника, но при этом имеет конечную площадь, так как его размер уменьшается с каждой итерацией.\\

Треугольник Серпинского находит применение в различных областях, например:
\begin{itemize}
    \item Компьютерная графика и анимация. Треугольник Серпинского используют для создания узоров и текстур, а также для генерации фрактальных ландшафтов и фоновых изображений в компьютерной графике и анимации.
    \item Алгоритмы и кодирование данных. Принцип самоподобия применяют в алгоритмах сжатия данных и кодировании, что может привести к более эффективному хранению и передаче информации.
    \item Искусство и дизайн. Фрактальные узоры используют в искусстве и дизайне для создания уникальных узоров и композиций.
\end{itemize}

\vskip40pt

\section{Рисование треугольника Серпинского в python}
Рассмотрим программу, предназначенкюа для построения и раскраски фрактального объекта — треугольника Серпинского. Программа основывается на библиотеке \textbf{\textcolor{blue}{matplotlib}}, что позволяет эффективно визуализировать фракталы с использованием геометрических примитивов и настроек масштабирования. Программа также поддерживает раскраску треугольника уровнями в заданной цветовой схеме.

\vskip10pt

\textbf{Основные компоненты программы:}
\begin{itemize}
\item Функция \textbf{\textcolor{blue}{draw\textunderscore sierpinski\textunderscore triangle}}:\\
   - Отвечает за построение фрактального треугольника без раскраски.\\
   - Если текущий уровень рекурсии (order) равен нулю, рисуется равносторонний треугольник на основе переданных координат вершин (vertices) с использованием объекта Polygon из \textbf{\textcolor{blue}{matplotlib}}.\\
   - Для уровней рекурсии выше нулевого, вершины треугольника делятся на три подмножества меньшего размера, и функция вызывается рекурсивно для каждого из них.
\begin{minted}{python}
def draw_sierpinski_triangle(order, vertices):
    if order == 0:
        triangle = plt.Polygon(vertices, edgecolor='none')
        plt.gca().add_patch(triangle)
    else:
        # Находим середины сторон
        midpoints = [
            (vertices[0] + vertices[1]) / 2,
            (vertices[1] + vertices[2]) / 2,
            (vertices[0] + vertices[2]) / 2
        ]
        
        # Рекурсивно рисуем меньшие треугольники
        draw_sierpinski_triangle(order - 1, [vertices[0], midpoints[0], midpoints[2]])
        draw_sierpinski_triangle(order - 1, [midpoints[0], vertices[1], midpoints[1]])
        draw_sierpinski_triangle(order - 1, [midpoints[2], midpoints[1], vertices[2]])
\end{minted}
\item Функция \textbf{\textcolor{blue}{color\textunderscore sierpinski\textunderscore triangle}}:\\
   - Расширяет функциональность функции построения, добавляя раскраску уровней фрактала.\\
   - Треугольники каждого уровня окрашиваются в зависимости от их глубины рекурсии, используя массив цветов colors.\\
     - Пример: "white" для минимального уровня, "blue", "red" и другие для более глубоких уровней.\\
   - Как и в предыдущей функции, вершины треугольника делятся на три подмножества меньшего размера, которые затем рекурсивно окрашиваются.
\begin{minted}{python}
def color_sierpinski_triangle(order, vertices):
    colors = ["white", "blue", "red", "pink", "yellow"]
    
    if order == 0:
        triangle = plt.Polygon(
            vertices, edgecolor='none', facecolor=colors[0])
        plt.gca().add_patch(triangle)
    else:
        # Находим середины сторон
        midpoints = [
            (vertices[0] + vertices[1]) / 2,
            (vertices[1] + vertices[2]) / 2,
            (vertices[0] + vertices[2]) / 2
        ]
        
        # Раскрашиваем текущий уровень
        triangle = plt.Polygon(
            vertices, edgecolor='none', facecolor=colors[order % 5])
        plt.gca().add_patch(triangle)
        
        # Рекурсивно раскрашиваем меньшие треугольники
        color_sierpinski_triangle(order - 1, [vertices[0], midpoints[0], midpoints[2]])
        color_sierpinski_triangle(order - 1, [midpoints[0], vertices[1], midpoints[1]])
        color_sierpinski_triangle(order - 1, [midpoints[2], midpoints[1], vertices[2]])
\end{minted}
\item Функция \textbf{\textcolor{blue}{main}}:\\
   - Считывает порядок фрактала (order) из ввода пользователя.\\
   - Инициализирует начальные параметры графика: размеры фигуры, масштаб, отключение осей и границ для более качественного отображения.\\
   - Задает начальные координаты вершин большого треугольника (равностороннего).\\
   - Центрирует начальный треугольник относительно окна с использованием смещения (offset\textunderscore x, offset\textunderscore y).\\
   - Вызывает функцию Функция \textbf{\textcolor{blue}{color\textunderscore sierpinski\textunderscore triangle}}:\\ для построения и раскраски фрактала.\\
   - После построения графика программа отображает результат и выводит время выполнения.\\
\begin{minted}{python}
def main():
    order = int(input('Введите порядок фрактала: '))  # Порядок треугольника
    start_time = time.perf_counter()
    # Задаем вершины большого треугольника
    height = np.sqrt(3) / 2
    vertices = np.array([[0, 0], [1, 0], [0.5, height]])
    
    plt.figure(figsize=(8, 8))
    plt.axis('equal')  # Устанавливаем равные масштабы по осям
    plt.axis('off')    # Отключаем оси
    
    # Центрируем треугольник
    offset_x = -0.5  # Сдвиг по X для центрирования
    offset_y = -height / 2  # Сдвиг по Y для центрирования
    centered_vertices = vertices + np.array([offset_x, offset_y])
    
    # Рисуем и раскрашиваем треугольник Серпинского
    color_sierpinski_triangle(order, centered_vertices)
    
    plt.xlim(-1, 1)  # Устанавливаем пределы по X
    plt.ylim(-1, 1)  # Устанавливаем пределы по Y
    plt.title('Треугольник Серпинского для порядка фрактала ' + str(order), fontfamily='Comic Sans MS', fontsize=2)
    plt.show()
    
    end_time = time.perf_counter()
    execution_time = end_time - start_time
        
    print(f"Время выполнения: {execution_time} секунд") 
\end{minted}
\end{itemize}
Использование \textbf{\textcolor{blue}{matplotlib}} обеспечивает высокое качество визуализации и поддержку масштабируемой графики. Гибкость раскраски через массив цветов, который можно легко расширить для создания более сложных цветовых схем. Возможность работы с большими фракталами благодаря эффективному расчету координат.

\centering
\includegraphics[width=\textwidth, left]{Figure_1.png}
Программа полезна для:
\begin{itemize}
    \item Изучения рекурсивного программирования.
    \item Демонстрации геометрических фракталов.
    \item Разработки визуализаций в научных и образовательных целях.
\end{itemize}
\end{document}
